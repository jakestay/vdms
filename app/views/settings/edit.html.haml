- content_for :title, t('.title')
- form_for @settings, :url => settings_path do |settings_form|
  - if @settings.errors.any?
    #errors
      %h3!= t('.errors')
      %ul
        - @settings.errors.full_messages.each do |message|
          %li!= message
  %fieldset
    %h3!= t('.data_entry_permissions')
    %p!= t('.data_entry_permissions_description')
    %ul
      %li.field
        != settings_form.label :disable_peer_advisors
        != settings_form.check_box :disable_peer_advisors
      %li.field
        != settings_form.label :disable_faculty
        != settings_form.check_box :disable_faculty
  %fieldset
    - numbers = []
    - 121.times {|i| numbers[i] = i}
    %h3!= t('.scheduler_settings')
    %p!= t('.scheduler_settings_description')
    %ul
      %li.field
        != settings_form.label :unsatisfied_admit_threshold
        %p!= t('.unsatisfied_admit_threshold_description')
        != settings_form.select :unsatisfied_admit_threshold, numbers
        %span.units!= t('.meetings')
      %li.field
        != settings_form.label :scheduler_scores_table
        - settings_form.fields_for :scheduler_factors_table do |scheduler_fields|
          %li
            != scheduler_fields.text_field :is_meeting_possible_score
            != scheduler_fields.label :is_meeting_possible_score
          %li
            != scheduler_fields.text_field :is_meeting_possible_penalty
            != scheduler_fields.label :is_meeting_possible_penalty
          %li
            != scheduler_fields.text_field :faculty_ranking_weight_score
            != scheduler_fields.label :faculty_ranking_weight_score
          %li
            != scheduler_fields.text_field :faculty_ranking_default
            != scheduler_fields.label :faculty_ranking_default
          %li
            != scheduler_fields.text_field :admit_ranking_weight_score
            != scheduler_fields.label :admit_ranking_weight_score
          %li
            != scheduler_fields.text_field :admit_ranking_default
            != scheduler_fields.label :admit_ranking_default
          %li
            != scheduler_fields.text_field :area_match_score
            != scheduler_fields.label :area_match_score
          %li
            != scheduler_fields.text_field :area_match_default
            != scheduler_fields.label :area_match_default
          %li
            != scheduler_fields.text_field :one_on_one_score
            != scheduler_fields.label :one_on_one_score
          %li
            != scheduler_fields.text_field :one_on_one_penalty
            != scheduler_fields.label :one_on_one_penalty
          %li
            != scheduler_fields.text_field :one_on_one_default
            != scheduler_fields.label :one_on_one_default
          %li
            != scheduler_fields.text_field :mandatory_score
            != scheduler_fields.label :mandatory_score
          %li
            != scheduler_fields.text_field :mandatory_default
            != scheduler_fields.label :mandatory_default
          %li
            != scheduler_fields.text_field :consecutive_timeslots_default
            != scheduler_fields.label :consecutive_timeslots_default
          %li
            != scheduler_fields.text_field :consecutive_timeslots_weight_score
            != scheduler_fields.label :consecutive_timeslots_weight_score
          %li
            != scheduler_fields.text_field :number_of_spots_per_admit
            != scheduler_fields.label :number_of_spots_per_admit
          %li
            != scheduler_fields.text_field :chromosomal_inversion_probability
            != scheduler_fields.label :chromosomal_inversion_probability
          %li
            != scheduler_fields.text_field :point_mutation_probability
            != scheduler_fields.label :point_mutation_probability
          %li
            != scheduler_fields.text_field :double_crossover_probability
            != scheduler_fields.label :double_crossover_probability
          %li
            != scheduler_fields.text_field :population_size
            != scheduler_fields.label :population_size
          %li
            != scheduler_fields.text_field :total_generations
            != scheduler_fields.label :total_generations

  %fieldset
    - sec_to_min = []
    - 121.times {|i| sec_to_min[i] = [i, i * 60]}
    %h3!= t('.meeting_times')
    %p!= t('.meeting_times_description')
    %ul
      %li.field
        != settings_form.label :meeting_length
        != settings_form.select :meeting_length, sec_to_min, {}, :disabled => true
        %span.units!= t('.minutes')
      %li.field
        != settings_form.label :meeting_gap
        != settings_form.select :meeting_gap, sec_to_min, {}, :disabled => true
        %span.units!= t('.minutes')
      - settings_form.fields_for :divisions do |division_fields|
        %li
          %h4!= "#{t('.time_intervals_for')} #{division_fields.object.long_name}"
          %ul
            - division_fields.fields_for :available_times do |available_time_fields|
              - @time = available_time_fields.object
              %li.field
                %ul
                  %li
                    != available_time_fields.label :begin, nil, :class => 'hidden'
                    != available_time_fields.datetime_select :begin, :include_blank => true
                  %li
                    != available_time_fields.label :end
                    != available_time_fields.time_select :end, :include_blank => true
                  - unless available_time_fields.object.new_record?
                    %li
                      != available_time_fields.check_box :_destroy
                      != available_time_fields.label :_destroy, t('.remove')
    != settings_form.submit t('.submit')
