!!! Strict
%html
  %head
    %title!= yield :title
    != stylesheet_link_tag 'reset'
    != stylesheet_link_tag 'main'
    != stylesheet_link_tag 'print', :media => 'print'
    != stylesheet_link_tag 'http://fonts.googleapis.com/css?family=Droid+Sans'
    != javascript_include_tag :defaults
  %body
    %h1!= link_to 'Visit Day', root_path
    #content
      %h2!= yield :title
      - unless flash[:notice].nil?
        %p#messages!= flash[:notice]
      - unless flash[:alert].nil?
        %p#alerts!= flash[:alert]
      != yield
    #navigation
      %ul
        %li!= link_to t('people.edit.alt_title'), edit_person_path(@current_user)
        - if @current_user.role != 'administrator'
          %li!= link_to t('events.index.alt_title'), events_path
      %ul
        - if @event.nil? || @event.new_record?
          - if @current_user.role == 'administrator'
            %li
              !=link_to t('people.index.title'), people_path
              %ul
                %li!= link_to t('people.new.title'), new_person_path
                %li!= link_to t('people.upload.title'), upload_people_path
            %li
              != link_to t('events.index.title'), events_path
              %ul
                %li!= link_to t('events.new.title'), new_event_path
          - else

        - unless @event.nil? || @event.new_record?
          %li
            != link_to @event.name, event_path(@event)
            %ul
              - if @current_user.role == 'administrator'
                %li!= link_to t('events.edit.title'), edit_event_path(@event)
                %li
                  !=link_to t('hosts.index.title'), event_hosts_path(@event)
                  %ul
                    !=link_to t('hosts.new.title'), new_event_host_path(@event)
                %li
                  !=link_to t('visitors.index.title'), event_visitors_path(@event)
                  %ul
                    !=link_to t('visitors.new.title'), new_event_visitor_path(@event)
                %li!= link_to t('meetings.master.title'), event_meetings_path(@event)
                %li!= link_to 'Meeting Statistics', statistics_event_meetings_path(@event)
                %li.dangerous!= link_to t('meetings.create_all.title'), create_all_event_meetings_path(@event), :confirm => t('meetings.create_all.warning')
              - elsif @current_user.role == 'facilitator'
                %li!= link_to t('hosts.index.title'), event_hosts_path(@event)
                %li!= link_to t('visitors.index.title'), event_visitors_path(@event)
              - unless @current_role.nil?
                - if @current_role.class == Host
                  %li!= link_to t('host_availabilities.edit_all.alt_title'), edit_all_event_host_availabilities_path(@event, @current_role)
                  %li!= link_to t('host_rankings.edit_all.alt_title'), edit_all_event_host_rankings_path(@event, @current_role)
                  %li!= link_to t('faculty.view_schedule.alt_title'), event_host_meetings_path(@event, @current_role)
                - else
                  %li!= link_to t('visitor_availabilities.edit_all.alt_title'), edit_all_event_visitor_availabilities_path(@event, @current_role)
                  %li!= link_to t('visitor_rankings.edit_all.alt_title'), edit_all_event_visitor_rankings_path(@event, @current_role)
                  %li!= link_to t('admits.view_schedule.alt_title'), event_visitor_meetings_path(@event, @current_role)
    #footer
      %p By Vinson Chuong, Benson Ma, and Jacky Wu, alumni of Prof. Armando Fox's Software Engineering course at UC Berkeley.
      %p Visual design by Amber Feng.
      %p Updated [INSERT TIME] - Commit [INSERT COMMIT ID]
